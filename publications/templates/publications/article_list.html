{% extends "base.html" %}

{% block title %}
Article list
{% endblock %}

{% block content %}

<form class="form-search">

  {% csrf_token %}

  <input type="text" name="search" class="search-query">
  <button class="btn" type="submit">Search</button>
</form>


{% if article_list %}

    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Headline</th>
            <th>Authors</th>
            <th>Submit date</th>
          </tr>
        </thead>
        <tbody>

    {% for article in article_list %}
        <tr>

          <td>
            <a href="{% url 'publications:article_detail' article.id %}">{{ article.headline }}</a>
          </td>

          <td>
          {% for author in article.authors.all %}
            <a href="{% url 'publications:author_detail' author.id %}">{{ author.last_name }}</a>, 
          {% endfor %}
          </td>

          <td>
            {{ article.submit_date }}
          </td>

        </tr>
    {% endfor %}

        </tbody>
      </table>
    </div>

{% if is_paginated %}

<div class="container">

  <ul class="pager">
    {% if page_obj.has_previous %}
    <li class="previous">
      <a href="?page={{ page_obj.previous_page_number }}">&larr; Previous</a>
    </li>
    {% else %}
    <li class="previous disabled">
      <a href="#">&larr; Previous</a>
    </li>
    {% endif %}

    <li>
      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </li>

    {% if page_obj.has_next %}
    <li class="next">
      <a href="?page={{ page_obj.next_page_number }}">Next &rarr;</a>
    </li>
    {% else %}
    <li class="next disabled">
      <a href="#">Next &rarr;</a>
    </li>
    {% endif %}
  </ul>

</div>

{% endif %}

{% else %}
    <p>No articles found.</p>
{% endif %}

{% endblock %}
